# Rust 学习笔记
> 记录干货，快速学习

## 基础篇
### 变量
重要概念: **绑定**

本质上，
* 变量是类似于引用，它指向(**绑定**)了"值"，"值"存在在堆上还是栈上由上下文决定; 
* 既然是引用,那么也由可能被覆盖，指向其他“值”，例如
    ```rust
    let mut spaces = "hello world";
    let spaces = spaces.len()
    ```
* 跟C/C++类似，不同作用域({}内部)变量实际是不同的
    ```rust
    fn main() {
        let x :i32 = 6;
        {
            let x :i32 = 65535;
            println!("In closure x is {}", x);
        }
        println!("Out closure x is {}", x);
    }
    ```
### 基本类型
> 主要理解类型间转换,和特殊类型
> 整形，浮点型，字符型等与C/C++语言类似，不再赘述
#### 序列
非常简洁的方式生成连续的数值
```rust
for i in 1..=5 {
    println!("{}", i)
}

for letter in 'a'..='z' {
    println!("{}", i)
}
```
#### 有理数和复数
```rust
use num::complex::Complex;
 fn main() {
   let a = Complex { re: 2.1, im: -1.2 };
   let b = Complex::new(11.1, 22.2);
   let result = a + b;

   println!("{} + {}i", result.re, result.im)
 }
```
#### 单元类型
```rust
()
// main函数默认返回单元类型 
```
你可以用 () 作为 map 的值，表示我们不关注具体的值，只关注 key。 这种用法和 Go 语言的 struct{} 类似，可以作为一个值用来占位，但是完全不占用任何内存。

#### 语句与表达式
重要区别：
语句：执行一些操作，但是没有**返回值**
表达式：会求值，并返回一个值, 表达式不能跟分号

#### 函数
- 函数要点
    函数名和变量名使用蛇形命名法(snake case)，例如 fn add_two() -> {}
    函数的位置可以随便放，Rust 不关心我们在哪里定义了函数，只要有定义即可。
    每个函数参数都需要标注类型

- 特殊返回值
    （）是零长度的元组，它没啥用，但是可以用于表达一个函数没有返回值
    - 函数没有返回值，那么就返回一个（）
    - 通过；结尾的表达式返回一个（）
- ！ 作为返回值
    当用 ! 作函数返回类型的时候，表示该函数永不返回( diverge function )，特别的，这种语法往往用做会导致程序崩溃的函数
    ```rust
    fn die() -> ! {
        panic!("serious error happened");
    }
    ```
### 所有权和借用
#### 所有权规则
* Rust 中每一个值都被一个变量所拥有，该变量被称为值的所有者
* 一个值同时只能被一个变量所拥有，或者说一个值只能拥有一个所有者
* 当所有者(变量)离开作用域范围时，这个值将被丢弃(drop)
#### move语义
借鉴了C/C++ Move语义，即让变量赋值遵守所有权规则2，值只能有一个所有者
#### clone语义
深拷贝
#### copy语义
浅拷贝，简单来说就是内存按位拷贝，那么只能发生在基本类型且长度一定的数据类型上
#### 函数参数和返回值
参数，可以是传值（move/copy, 或主动调用clone一份），或传引用方式(借用)
返回值，可以返回值
#### 引用
可变引用只能有一个，不可变引用可以有多个
同一个生命周期只能存在一种类型的引用(不可变引用、可变引用互斥)
正在借用不可变引用的用户，肯定不希望他借用的东西，被另外一个人莫名其妙改变了

- 借用规则如下：
    同一时刻，你只能拥有要么一个可变引用, 要么任意多个不可变引用
    引用必须总是有效的

## 复合类型




